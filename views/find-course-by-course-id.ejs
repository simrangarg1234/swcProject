<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>SWC Course Directory</title>
        <link rel="icon" href="../images/swc_icon.ico"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
        <style>
            body{
                font-family: arial;
                margin: 0;
            }
            nav{
                background: skyblue;
                padding: 20px 10px;
            }
            nav ul{
                max-width: 960px;
                margin: 0 auto;
                padding: 0;
            }
            nav li{
                list-style-type: none;
                display: inline-block;
                margin: 0 10px 0 0;
            }
            nav a{
                color: black;
                font-size: 18px;
                background: rgba(255,255,255,0.2);
                text-decoration: none;
                padding: 10px;
                display: block;
            }
            main, header{
                max-width: 960px;
                margin: 30px auto;
                padding: 0 10px;
                color: #333;
                font-size: large;
                font-weight: bolder;
            }
            .active-link {
                background-color: rgb(57, 222, 247);
            }
            .active-link a{
                color: white;
            }
            .link-hover:hover {
                background-color: rgb(57, 222, 247);
            }
            .link-hover:hover a{
                background-color: rgb(57, 222, 247);
                color: white;
            }
            .link-hover a{
                text-decoration: none;
            }
        </style>
    </head>
    <body>
        <nav>
            <ul>
                <li><a href="/">Homepage</a></li>
                <li><a href="/profile">Profile</a></li>
                <% if (user) { %>
                <li><a href="/auth/logout">Log out</a></li>
                <% } else { %>
                <li><a href="/auth/login">Login</a></li>
                <% } %>
            </ul>
        </nav>
        <div class="container mt-1 mb-2">
            <div class="row">
                <div class="col-3">
                </div>
                <div class="col-2 text-center link-hover">
                    <a href="/find-course-by-topic"> Topic </a>
                </div>
                <div class="col-2 text-center link-hover active-link">
                    <a href="/find-course-by-courseid"> Course_Id </a>
                </div>
                <div class="col-2 text-center link-hover">
                    <a href="/find-course-by-department"> Department </a>
                </div>
                <div class="col-3">
                </div>
            </div>
        </div>
        <div class="container">
            <input type="text" id="mySearch1" onkeyup="myFunction1()" placeholder="Search by Course Id">
            <input type="text" id="mySearch2" onkeyup="myFunction1()" placeholder="Search by Course Name">
            <br>
            <select name = "dropdown" id="mySearch3" onchange="myFunction1();" >
                <option value = "" selected>-Level-</option>
                <option value = "Graduate">Graduate</option>
                <option value = "Undergraduate">Undergraduate</option>
            </select>
            <select name = "<% courses_data %>" id="mySearch4" onchange="sortTable()" >
                <option value = "" selected>-Sort by-</option>
                <option value = "course_id">Course_id</option>
                <option value = "name">Course_name</option>
            </select>
        </div>
        <div class="container">
            <table class="table" id="myMenu">
                <tr>
                    <th> Course Id </th>
                    <th> Course Name </th>
                    <th> Credits </th>
                </tr>
            <% for(var i=0; i< courses_data.length; i++) {%>
                    <tr>
                        <td> <a href="/courses/<%= courses_data[i].course_id %>"> <%= courses_data[i].course_id %> </a> </td>
                        <td> <a href="/courses/<%= courses_data[i].course_id %>"> <%= courses_data[i].name %> </a> </td>
                        <td> <a href="/courses/<%= courses_data[i].course_id %>"> <%= courses_data[i].level %> </a> </td>
                    </tr>
            <% } %>
            </table>
        </div>

        <script>
            function myFunction1() {
              var input1, input2, input3, filter1, filter2, table, tr, td, a1, a2, a3, i;
              input1 = document.getElementById("mySearch1");
              filter1 = input1.value.toUpperCase();
              input2 = document.getElementById("mySearch2");
              filter2 = input2.value.toUpperCase();
              input3 = document.getElementById("mySearch3").value;
              table = document.getElementById("myMenu");
              tr = table.getElementsByTagName("tr");
              for (i = 1; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td");
                a1 = td[0].getElementsByTagName("a")[0];
                a2 = td[1].getElementsByTagName("a")[0];
                a3 = td[2].getElementsByTagName("a")[0];
                if ((a1.innerHTML.toUpperCase().indexOf(filter1) > -1) && (a2.innerHTML.toUpperCase().indexOf(filter2) > -1) && a3.innerHTML.indexOf(input3) > -1) {
                  tr[i].style.display = "";
                } else {
                  tr[i].style.display = "none";
                }
              }
            }
            function sortTable() {
              var table, rows, switching, i, x, y, shouldSwitch,value,t;
              table = document.getElementById("myMenu");
              value = document.getElementById("mySearch4").value;
              switching = true;
              if(value == "course_id") t=0;
              else if(value == "name") t=1;
              else switching=false;
              while (switching) {
                switching = false;
                rows = table.rows;
                for (i = 1; i < (rows.length - 1); i++) {
                  shouldSwitch = false;
                  x = rows[i].getElementsByTagName("td")[t];
                  y = rows[i + 1].getElementsByTagName("td")[t];
                  if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                    shouldSwitch = true;
                    break;
                  }
                }
                if (shouldSwitch) {
                  rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                  switching = true;
                }
              }
            }
        </script>
    </body>
</html>
